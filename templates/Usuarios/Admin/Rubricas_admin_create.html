{% extends 'Usuarios/menuAdmin.html' %}
{%block page%}
<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px">

  <!-- Portada -->
  <div class="w3-container" id="portada" style="margin-top:80px; margin-bottom:10px">
    <h1 class="w3-xxxlarge w3-text-red"><b>Rúbricas</b></h1>
    <hr style="width:50px;border:5px solid red" class="w3-round">
  </div>

<div class="w3-container">
  <a class="w3-button w3-large w3-red w3-right w3-round" href="{% url 'usuarios:rubricas_admin' usuario.id%}" >Volver</a><br>
</div>
<!--Seccion rubricas-->

    <!-- Formulario agregar rúbrica -->

<div class="w3-row w3-container">




        <form method="post" id="nueva_rubrica" enctype="multipart/form-data">
            {% csrf_token %}
            <input placeholder="Titulo de la rubrica" name="tituloRubrica"><i class="fas fa-edit"></i>
            <div class = "w3-col" align="right">
                <label>Intervalo de presentación</label>
                <input placeholder="Ej: 7-10" name="intervalo">
            </div>


            <input name="numFilas" id="idNumFilas" hidden value=3>
            <input name="numColumnas" id="idNumCols" hidden value=4>
            <table id="matriz">
                <tr class="button">
                    <td class="thD"><textarea name="f0c0" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f0c1" class="form-control" rows="3"></textarea></td>
                    <!--<td class="thD"><textarea name="f0c1" class="form-control" rows="3">asignar puntaje</textarea></td>-->
                    <td class="thD"><textarea name="f0c2" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f0c3" class="form-control" rows="3"></textarea></td>

                </tr>
                <tr class="button">
                    <!--<td class="thD"><textarea name="f1c0" class="form-control" rows="3">Modificar aspecto</textarea></td>-->
                    <td class="thD"><textarea name="f1c0" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f1c1" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f1c2" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f1c3" class="form-control" rows="3"></textarea></td>
                </tr>
                <tr class="button">
                    <td class="thD"><textarea name="f2c0" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f2c1" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f2c2" class="form-control" rows="3"></textarea></td>
                    <td class="thD"><textarea name="f2c3" class="form-control" rows="3"></textarea></td>
                </tr>

            </table>

            <div class="btn-group">
                <button type="button" class="button" onclick="agregarFila()">Agregar fila  <i class="fas fa-plus"></i></button>
                <button type="button" class="button" onclick="agregarColumna()" >Agregar columna  <i class="fas fa-plus"></i></button>
                <button type="button" class="button" onclick="borrarFila()">Borrar fila  <i class="fas fa-trash"></i></button>
                <button type="button" class="button" onclick="borrarColumna()">Borrar columna  <i class="fas fa-trash"></i></button>
            </div>

            <button type="submit" class="button1 button1" onclick="sendRubrica()">Guardar rúbrica  <i class="far fa-save"></i></button>


        </form>




  </div>







    <!-- End page content -->
</div>
<!-- W3.CSS Container -->
<div class="w3-light-grey w3-container w3-padding-32" style="margin-top:75px;padding-right:58px"><p class="w3-right">Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a></p></div>

<script>
// Script to open and close sidebar
function sendRubrica() {
    location.href='/Usuarios/login.html';

}

function agregarFila() {
    let filas=document.getElementById("matriz").getElementsByClassName("button");
    let numFilas=document.getElementById("matriz").getElementsByClassName("button").length;
    let numCols=document.getElementById("matriz").getElementsByClassName("button").item(0).getElementsByClassName("thD").length;
    let b="";
    for(let i=0;i<numFilas;i++){
        let colsi=filas.item(i).getElementsByClassName("thD");
        b=b+"<tr class=\"button\">";
        for(let j=0;j<numCols;j++){
            let textoDelTextArea=colsi.item(j).getElementsByClassName("form-control").item(0).value;
            let textName="f"+i+"c"+j;
            b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+" rows=\"3\">"+ textoDelTextArea +"</textarea></td>";
        }
        b=b+"</tr>";
    }

    //creo un nuevo button
    b=b+"<tr class=\"button\">";
    for(let j=0;j<numCols;j++){
        let textName="f"+numFilas+"c"+j;
        b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+" rows=\"3\"></textarea></td>";

        }
    b=b+"</tr>";
    //lo pongo
    document.getElementById("idNumFilas").value=numFilas+1;
    document.getElementById("idNumCols").value=numCols;
    document.getElementById("matriz").innerHTML=b;
}

function agregarColumna() {
    let numFilas=document.getElementById("matriz").getElementsByClassName("button").length;
    let numCols=document.getElementById("matriz").getElementsByClassName("button").item(0).getElementsByClassName("thD").length;
    let filas=document.getElementById("matriz").getElementsByClassName("button");

    let b="";
    //por cada fila, debo agregar una columna nueva
    for(let i=0;i<numFilas;i++){
        //agregos las columnas anteriores, preservando sus values
        let colsi=filas.item(i).getElementsByClassName("thD");
        b=b+"<tr class=\"button\">";
        for(let j=0;j<numCols;j++){
            let textoDelTextArea=colsi.item(j).getElementsByClassName("form-control").item(0).value;
            let textName="f"+i+"c"+j;
            b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+" rows=\"3\">"+ textoDelTextArea +"</textarea></td>";
        }

        //agrego la nueva columna

        let textName="f"+i+"c"+numCols;
        b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+ " rows=\"3\"></textarea></td>";

        b=b+"</tr>";
    }
    document.getElementById("idNumFilas").value=numFilas;
    document.getElementById("idNumCols").value=numCols+1;
    document.getElementById("matriz").innerHTML=b;

}

function borrarFila() {

    let filas=document.getElementById("matriz").getElementsByClassName("button");
    let numFilas=document.getElementById("matriz").getElementsByClassName("button").length;
    let numCols=document.getElementById("matriz").getElementsByClassName("button").item(0).getElementsByClassName("thD").length;
    let b="";
    for(let i=0;i<numFilas-1;i++){
        let colsi=filas.item(i).getElementsByClassName("thD");
        b=b+"<tr class=\"button\">";
        for(let j=0;j<numCols;j++){
            let textoDelTextArea=colsi.item(j).getElementsByClassName("form-control").item(0).value;
            let textName="f"+i+"c"+j;
            b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+" rows=\"3\">"+ textoDelTextArea +"</textarea></td>";
        }
        b=b+"</tr>";
    }
    document.getElementById("idNumFilas").value=numFilas-1;
    document.getElementById("idNumCols").value=numCols;
    document.getElementById("matriz").innerHTML=b;


}

function borrarColumna() {
    let numFilas=document.getElementById("matriz").getElementsByClassName("button").length;
    let numCols=document.getElementById("matriz").getElementsByClassName("button").item(0).getElementsByClassName("thD").length;
    let filas=document.getElementById("matriz").getElementsByClassName("button");

    let b="";
    //por cada fila, debo agregar una columna nueva
    for(let i=0;i<numFilas;i++){
        //agregos las columnas anteriores, preservando sus values
        let colsi=filas.item(i).getElementsByClassName("thD");
        b=b+"<tr class=\"button\">";
        for(let j=0;j<numCols-1;j++){
            let textoDelTextArea=colsi.item(j).getElementsByClassName("form-control").item(0).value;
            let textName="f"+i+"c"+j;
            b=b+"<td class=\"thD\"><textarea class=\"form-control\""+ "name="+textName+" rows=\"3\">"+ textoDelTextArea +"</textarea></td>";
        }

        b=b+"</tr>";
    }
    document.getElementById("idNumFilas").value=numFilas;
    document.getElementById("idNumCols").value=numCols-1;
    document.getElementById("matriz").innerHTML=b;
}

</script>


<style>

body {font-family: Arial, Helvetica, sans-serif;}
.form-inline label {
    margin: 5px 0 5px 0;
}
.form-inline input {
    vertical-align: middle;
    margin: 5px 10px ;
    padding: 5px;
    width: 10%;
    background-color: #fff;
    border: 1px solid #ddd;
}
.form-inline button {
    padding: 5px 10px;
    background-color: #c6bdbb;
    border: none;
    color: black;
    cursor: pointer;
    border-radius: 8px;
}
.form-inline button:hover {
    background-color: #FFA07A;
}

table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 100%;
    cursor: pointer;
    margin: 10px 0.5% 0.5%;
}
td, th {
    border: 1px solid #665f5f;
    text-align: left;
    width: 5%;

}
tr:nth-child(even) {
    background-color: #FFA07A;
}

.btn-group .button {
    background-color: #c6bdbb;
    border: none;
    color: black;
    padding: 15px 4.6%;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    cursor: pointer;
    float: left;
    margin: 18px 2%;
}
.btn-group .button { border-radius: 12px;}
.btn-group .button:hover { background-color: #FFA07A; }

.button1 {
    background-color: #BF1010;
    border: none;
    color: white;
    padding: 45px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 10px 78%;
    cursor: pointer;
}
.button1 {border-radius: 12px;}
.button1.button1:hover {background-color: #FFA07A;}
</style>

{%endblock page%}